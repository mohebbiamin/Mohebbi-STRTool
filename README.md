# 🥷 Mohebbi STR Tool Pro

<div align="center">

![Version](https://img.shields.io/badge/version-2.0%20PRO-blue)
![.NET](https://img.shields.io/badge/.NET%20Framework-4.8.1-purple)
![Game](https://img.shields.io/badge/game-Mark%20of%20the%20Ninja%20Remastered-red)
![Status](https://img.shields.io/badge/status-Advanced%20Edition-green)

**ابزار حرفه‌ای و پیشرفته استخراج و بازسازی فایل‌های STR**
**برای بازی Mark of the Ninja Remastered**

[فارسی](#-فارسی) | [English](#-english)

</div>

---

## 🌟 فارسی

### درباره نسخه Pro

برنامه **Mohebbi STR Tool Pro** یک ابزار کامل و حرفه‌ای برای کار با فایل‌های `.str` بازی Mark of the Ninja Remastered است. این نسخه شامل ویژگی‌های پیشرفته‌ای است که کار با فایل‌های بازی را بسیار آسان‌تر و سریع‌تر می‌کند.

---

### ✨ ویژگی‌های پیشرفته

#### 🎨 رابط کاربری

- **✅ طراحی مدرن و حرفه‌ای** - رابط کاربری زیبا با طراحی Material Design
- **✅ تم Dark/Light** - دو تم زیبا برای راحتی کار در شرایط مختلف (Ctrl+T)
- **✅ Layout پاسخگو** - قابلیت تغییر اندازه و SplitContainer
- **✅ Menu Bar کامل** - دسترسی سریع به تمام امکانات
- **✅ ToolBar پیشرفته** - ابزارهای سریع در دسترس

#### 🔥 قابلیت‌های اصلی

##### 1️⃣ استخراج (Extract)
- استخراج فایل‌های STR به TXT
- نمایش اطلاعات فایل (اندازه، تاریخ و...)
- پیشرفت زنده (Real-time progress)
- لاگ کامل عملیات

##### 2️⃣ بازسازی (Rebuild)
- تبدیل TXT به STR
- حفظ کامل ساختار اصلی فایل
- اعتبارسنجی خودکار
- پشتیبان‌گیری خودکار (اختیاری)

##### 3️⃣ پردازش دسته‌ای (Batch Processing)
- **انتخاب چندین فایل یکجا**
- **پردازش همزمان**
- **گزارش کامل نتایج**
- **صرفه‌جویی زمان قابل توجه**

#### 📝 ویرایشگر داخلی

- **ویرایش مستقیم متن** - بدون نیاز به ویرایشگر خارجی
- **Syntax Highlighting** - رنگ‌بندی برای راحتی کار
- **Auto-Save** - ذخیره خودکار (اختیاری)
- **ذخیره سریع** - با Ctrl+S
- **Word Wrap** - شکستن خطوط بلند

#### 🔍 جستجو و جایگزینی

- **Search & Replace پیشرفته** - جستجوی سریع (Ctrl+F یا F3)
- **Case Sensitive** - حساسیت به حروف بزرگ و کوچک
- **Replace All** - جایگزینی همه موارد
- **Find Next** - پیدا کردن مورد بعدی
- **Status Display** - نمایش وضعیت جستجو

#### 📊 آمار و گزارش

- **تعداد خطوط** - شمارش دقیق
- **تعداد کلمات** - آمار کامل
- **تعداد کاراکترها** - محاسبه دقیق
- **اطلاعات فایل** - نمایش جزئیات کامل

#### 💾 پشتیبان‌گیری

- **Auto-Backup** - پشتیبان خودکار قبل از هر تغییر
- **Timestamped Backups** - نام‌گذاری با تاریخ و ساعت
- **پوشه جداگانه** - نگهداری در پوشه Backups
- **بدون محدودیت** - تعداد نامحدود backup

#### 📂 مدیریت فایل

- **Recent Files** - فایل‌های اخیر (قابل تنظیم)
- **Drag & Drop** - کشیدن و رها کردن فایل‌ها
- **File Browser** - مرورگر فایل پیشرفته
- **Quick Access** - دسترسی سریع

#### 📤 Export به فرمت‌های مختلف

- **JSON Export** - خروجی JSON با Pretty Print
- **XML Export** - فرمت XML استاندارد
- **CSV Export** - فرمت CSV برای Excel
- **UTF-8 Support** - پشتیبانی کامل از Unicode

#### ⚙️ تنظیمات پیشرفته

- **تنظیمات جامع** - کنترل کامل بر رفتار برنامه
- **ذخیره خودکار** - تنظیمات ذخیره می‌شوند
- **قابل سفارشی‌سازی** - تغییر هر پارامتر
- **Reset to Default** - بازگشت به تنظیمات پیش‌فرض

#### 📝 لاگ پیشرفته

- **رنگ‌بندی** - رنگ متناسب با نوع پیام
- **Timestamp** - زمان دقیق هر عملیات
- **Log Levels** - Info, Success, Warning, Error, Debug
- **Clear Log** - پاک کردن سریع
- **Copy Support** - کپی کردن لاگ‌ها

#### ⌨️ کلیدهای میانبر

| کلید | عملکرد |
|------|--------|
| `Ctrl+O` | باز کردن فایل |
| `Ctrl+S` | ذخیره پیش‌نمایش |
| `Ctrl+E` | استخراج |
| `Ctrl+R` | بازسازی |
| `Ctrl+F` | جستجو و جایگزینی |
| `Ctrl+T` | تغییر تم |
| `F1` | راهنما |
| `F3` | جستجوی بعدی |
| `Esc` | بستن دیالوگ |

---

### 🚀 نحوه استفاده

#### روش 1: Extract (استخراج)

1. Tab "📥 Extract" را انتخاب کنید
2. فایل `.str` را انتخاب کنید:
   - کلیک روی "Browse..."
   - یا Drag & Drop فایل
   - یا از Recent Files
3. دکمه "🔓 EXTRACT TO TXT" را بزنید
4. فایل `.txt` در همان پوشه ساخته می‌شود
5. محتوا در ویرایشگر نمایش داده می‌شود

#### روش 2: Rebuild (بازسازی)

1. Tab "📤 Rebuild" را انتخاب کنید
2. فایل `.txt` ویرایش شده را انتخاب کنید
3. فایل `.str` اصلی را انتخاب کنید
4. دکمه "🔒 REBUILD TO STR" را بزنید
5. فایل `NEW_*.str` ساخته می‌شود

#### روش 3: Batch Processing (پردازش دسته‌ای)

1. Tab "📦 Batch" را انتخاب کنید
2. کلیک روی "Select Multiple Files..."
3. چندین فایل `.str` را انتخاب کنید (با Ctrl یا Shift)
4. دکمه "⚡ PROCESS ALL" را بزنید
5. همه فایل‌ها به صورت خودکار پردازش می‌شوند

#### روش 4: ویرایش و جستجو

1. پس از Extract، متن در سمت راست نمایش داده می‌شود
2. مستقیماً متن را ویرایش کنید
3. برای جستجو: `Ctrl+F` یا کلیک روی "🔍 Search & Replace"
4. متن مورد نظر را پیدا و جایگزین کنید
5. با `Ctrl+S` ذخیره کنید

#### روش 5: Export

1. Menu "Tools" → انتخاب فرمت:
   - Export to JSON
   - Export to XML
   - Export to CSV
2. فایل با فرمت انتخابی ساخته می‌شود

---

### ⚙️ تنظیمات

#### General (عمومی)

- **🌙 Enable Dark Theme** - فعال‌سازی تم تیره
- **💾 Auto-backup files** - پشتیبان خودکار
- **⚠️ Confirm before overwriting** - تأیید قبل از جایگزینی
- **Default Encoding** - کدگذاری پیش‌فرض (UTF-8, UTF-16, ...)
- **Default Export Format** - فرمت خروجی پیش‌فرض

#### Advanced (پیشرفته)

- **🐛 Show debug logs** - نمایش لاگ‌های debug
- **💾 Auto-save preview** - ذخیره خودکار پیش‌نمایش
- **✨ Pretty print JSON** - فرمت زیبای JSON
- **Auto-save interval** - فاصله ذخیره خودکار (ثانیه)
- **Max recent files** - حداکثر فایل‌های اخیر

---

### 📋 ساختار فایل STR

```
┌─────────────────────────────────────────────┐
│ Header (12 bytes)                           │
│  - Magic Number / Signature                 │
│  - Version Info                             │
├─────────────────────────────────────────────┤
│ String Count (4 bytes, Little-Endian)      │
│  - تعداد کل رشته‌ها                        │
├─────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────┐ │
│ │ String Entry #1                         │ │
│ │ ├─ Metadata (16 bytes)                  │ │
│ │ │   - String ID / Hash                  │ │
│ │ │   - Flags / Properties                │ │
│ │ ├─ Length (1-2 bytes)                   │ │
│ │ │   - < 128: 1 byte                     │ │
│ │ │   - ≥ 128: 2 bytes (special encoding) │ │
│ │ └─ String Data (UTF-16 LE)              │ │
│ │     - متن یونیکد                        │ │
│ └─────────────────────────────────────────┘ │
│ ... (repeated for each string)              │
├─────────────────────────────────────────────┤
│ Remaining Data / Padding                    │
└─────────────────────────────────────────────┘
```

#### کدگذاری طول رشته (Length Encoding)

```python
# For lengths < 128:
length = byte[0]

# For lengths ≥ 128:
byte1 = first_byte
byte2 = second_byte
multiplier = byte2
length = (byte1 | (byte2 << 8)) - 128 * (multiplier + 1)
```

#### Placeholders خاص

هنگام استخراج، این کاراکترها جایگزین می‌شوند:

- `\r\n` (CRLF) → `<cf>`
- `\n` (LF) → `<lf>`
- `\r` (CR) → `<cr>`

هنگام rebuild، به حالت اصلی برمی‌گردند.

---

### 💡 نکات و ترفندها

#### ترجمه فارسی بازی

1. فایل `English.str` را از پوشه بازی Extract کنید
2. فایل `English.txt` را با ویرایشگر باز کنید
3. متن‌ها را به فارسی ترجمه کنید (تعداد خطوط را تغییر ندهید!)
4. فایل را ذخیره کنید
5. Rebuild کنید و فایل خروجی را به `Persian.str` تغییر نام دهید
6. در پوشه بازی قرار دهید

#### مود سازی

- می‌توانید دیالوگ‌ها را تغییر دهید
- نام‌های اشیاء را شخصی‌سازی کنید
- متن‌های راهنما را ویرایش کنید
- سیستم‌های جدید نام‌گذاری ایجاد کنید

#### بهینه‌سازی کار

- از Batch Mode برای پردازش چند فایل استفاده کنید
- Keyboard Shortcuts را یاد بگیرید
- Auto-backup را فعال کنید (برای ایمنی)
- تم Dark را در شب استفاده کنید (راحتی چشم)

---

### 🐛 عیب‌یابی

#### ❌ "Error: Invalid file count"

**علت:** فایل STR معتبر نیست

**راه‌حل:**
- مطمئن شوید فایل از نسخه Remastered است (نه نسخه اصلی)
- فایل را مجدداً از بازی استخراج کنید
- با Hex Editor فایل را بررسی کنید

#### ❌ "String count mismatch"

**علت:** تعداد خطوط TXT با STR اصلی مطابقت ندارد

**راه‌حل:**
- تعداد خطوط را تغییر نداده‌اید
- خطوط خالی را حذف نکرده‌اید
- از دستور Replace All با دقت استفاده کنید

#### ❌ بازی فایل را نمی‌خواند

**علت:** فایل یا مسیر اشتباه است

**راه‌حل:**
- نام فایل باید دقیقاً مانند اصل باشد
- پسوند `.str` را چک کنید`
- بازی را Restart کنید

#### ❌ متن فارسی به صورت ??? نمایش داده می‌شود

**علت:** Encoding اشتباه است

**راه‌حل:**
- از UTF-8 (without BOM) استفاده کنید
- در Settings → Encoding را چک کنید
- فایل را دوباره Save کنید
- بازی باید از فونت فارسی پشتیبانی کند

---

### 📊 مقایسه نسخه‌ها

| ویژگی | Basic | Pro |
|-------|-------|-----|
| Extract/Rebuild | ✅ | ✅ |
| Batch Processing | ❌ | ✅ |
| Built-in Editor | ❌ | ✅ |
| Search & Replace | ❌ | ✅ |
| Dark/Light Theme | ❌ | ✅ |
| Auto-Backup | ❌ | ✅ |
| Recent Files | ❌ | ✅ |
| Export to JSON/XML/CSV | ❌ | ✅ |
| Statistics | ❌ | ✅ |
| Settings Panel | ❌ | ✅ |
| Keyboard Shortcuts | ❌ | ✅ |
| Advanced Logging | ❌ | ✅ |

---

### 📄 لایسنس و استفاده

این ابزار رایگان و متن‌باز (Open Source) است.

✅ **مجاز:**
- استفاده شخصی
- استفاده تجاری
- تغییر کد
- توزیع مجدد

❌ **غیرمجاز:**
- حذف نام سازنده
- ادعای مالکیت
-فروش ابزار
---
### 🎮 سازگاری

#### بازی‌های پشتیبانی شده

- ✅ **Mark of the Ninja: Remastered** (Primary)
- ⚠️ **Mark of the Ninja** (نسخه اصلی - Limited Support)

#### سیستم عامل

- ✅ Windows 11
- ✅ Windows 10
- ✅ Windows 8.1
- ✅ Windows 7 (با .NET 4.8.1)
- ❌ Linux (می‌توان با Wine اجرا کرد)
- ❌ macOS (می‌توان با Wine اجرا کرد)

---

### 📚 منابع مفید

- [Mark of the Ninja Remastered - Steam](https://store.steampowered.com/app/860950/)
- [Klei Entertainment](https://www.klei.com/)

---

### 👨‍💻 سازنده

**Mohebbi** 🇮🇷

این ابزار با ❤️ برای کامیونیتی Mark of the Ninja ساخته شده است.

---

### 🔄 تاریخچه نسخه‌ها

#### v2.0 Pro (2024) - Advanced Edition
- ✅ Batch Processing
- ✅ Built-in Editor
- ✅ Search & Replace
- ✅ Dark/Light Theme
- ✅ Auto-Backup
- ✅ Recent Files
- ✅ Export to JSON/XML/CSV
- ✅ Statistics
- ✅ Advanced Settings
- ✅ Keyboard Shortcuts
- ✅ Improved UI/UX

#### v1.0 Basic (2024) - Initial Release
- ✅ Basic Extract
- ✅ Basic Rebuild
- ✅ Simple UI

---

### 🎯 Roadmap (آینده)

#### نسخه‌های بعدی:

**v2.1** (در دست برنامه‌ریزی)
- [ ] Compare Mode (مقایسه فایل‌ها)
- [ ] Undo/Redo
- [ ] Plugin System
- [ ] Translation Memory
- [ ] Cloud Sync

**v3.0** (ایده‌ها)
- [ ] AI-Powered Translation
- [ ] Collaborative Editing
- [ ] Version Control Integration
- [ ] Steam Workshop Integration

---

### ❓ سوالات متداول (FAQ)

**سوال: آیا این ابزار قانونی است؟**
جواب: بله، این ابزار فقط فایل‌های متنی را استخراج و ویرایش می‌کند. به فایل‌های اصلی بازی آسیب نمی‌رساند.

**سوال: آیا می‌توانم برای بازی‌های دیگر استفاده کنم؟**
جواب: خیر، این ابزار مخصوص فرمت STR بازی Mark of the Ninja است.

**سوال: backup خودکار کجا ذخیره می‌شود؟**
جواب: در پوشه `Backups` کنار فایل اصلی.

**سوال: Settings کجا ذخیره می‌شود؟**
جواب: مسیر `%AppData%/MohebbiSTRTool/settings.xml`

**سوال: آیا نیاز به اینترنت دارد؟**
جواب: خیر، کاملاً offline کار می‌کند.

---

<div align="center">

### ⭐ اگر این ابزار مفید بود، ستاره بدهید! ⭐

---

**Made with ❤️ by Mohebbi**

**For the Mark of the Ninja Community**

🥷 Happy Modding! 🥷

</div>

---

## 🌍 English

### About Pro Version

**Mohebbi STR Tool Pro** is a comprehensive and professional tool for working with `.str` files from Mark of the Ninja Remastered. This version includes advanced features that make working with game files much easier and faster.

---

### ✨ Advanced Features

- **📦 Batch Processing** - Process multiple files simultaneously
- **📝 Built-in Editor** - Edit text directly without external editors
- **🔍 Search & Replace** - Advanced find and replace functionality
- **🎨 Dark/Light Themes** - Two beautiful themes for comfortable work
- **💾 Auto-Backup** - Automatic backup before changes
- **📂 Recent Files** - Quick access to recent files
- **📤 Multi-Format Export** - Export to JSON, XML, CSV
- **📊 Statistics** - View lines, words, characters count
- **⌨️ Keyboard Shortcuts** - Fast workflow with shortcuts
- **⚙️ Advanced Settings** - Customizable behavior
- **📝 Advanced Logging** - Color-coded logs with timestamps

---

### 🚀 Quick Start

1. Launch the application
2. Choose a tab: Extract, Rebuild, or Batch
3. Select your files (browse or drag & drop)
4. Click the action button
5. Done! Check the log for details

---

### ⌨️ Keyboard Shortcuts

| Key | Action |
|-----|--------|
| `Ctrl+O` | Open File |
| `Ctrl+S` | Save Preview |
| `Ctrl+E` | Extract |
| `Ctrl+R` | Rebuild |
| `Ctrl+F` | Search & Replace |
| `Ctrl+T` | Toggle Theme |
| `F1` | Help |
| `F3` | Find Next |
| `Esc` | Close Dialog |

---

### 📋 System Requirements

- **OS:** Windows 7 or later
- **.NET Framework:** 4.8.1
- **RAM:** 512 MB minimum
- **Disk Space:** 10 MB

---

### 📄 License

MIT License - Free to use, modify, and distribute.

---

### 🤝 Contributing

Contributions are welcome! Feel free to:
- Report bugs
- Suggest features
- Submit pull requests
- Improve documentation

---

### 👨‍💻 Author

**Mohebbi** 🇮🇷

Made with ❤️ for the Mark of the Ninja community

---

<div align="center">

**⭐ Star this project if you find it useful! ⭐**

🥷 **Happy Modding!** 🥷

</div>
